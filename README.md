#  Лабораторна робота №1  
## Дослідження продуктивності Apache Kafka для енергетичних IoT-потоків  

Варіант: 1 (Сонячні електростанції Київської області)  
Підваріант: А (Real-time focus)

---

## 1.  Мета та Критичний Фокус

### Мета:
Експериментально дослідити параметри продуктивності Apache Kafka при обробці IoT-даних від 50 сонячних електростанцій, які передають дані кожні 10 секунд.

### Критичні параметри (Фокус А):
- Критичний параметр: cloud_factor (рівень хмарності)  
- Критерій успіху: Латентність < 20 мс для real-time моніторингу  
- Оптимальна конфігурація: linger.ms = 0, compression = none

---

## 2.  Результати Тестування

### 2.1. Оптимізація Batch/Linger (Критична Latency)

| Конфігурація | Records/sec | Avg Latency (ms) | 95th Latency (ms) | Призначення |
|--------------|--------------|------------------|-------------------|--------------|
| 64KB, 0ms    | 28901        | 4.96             | 8                 |  Оптимум Real-time (Cloud Alert) |
| 16KB, 0ms    | 27397        | 10.25            | 17                | Real-time (Reference) |
| 64KB, 50ms   | 30864        | 4.04             | 15                | Max Throughput / Batch |
| 256KB, 10ms  | 25839        | 35.98            | 59                |  FAIL (Too High Latency) |

Висновок:  
Конфігурація 64KB, 0ms забезпечила надійну низьку затримку *(8 мс у 95-му персентилі)*, повністю виконавши критерій < 20 мс.

---

### 2.2. Порівняння Compression (64KB, 10ms)

| Алгоритм | Avg Latency (ms) | MB/sec | Призначення |
|-----------|------------------|--------|--------------|
| none      | 6.75             | 0.49   |  Min Latency Guarantee |
| lz4       | 6.72             | 0.49   | Найшвидша обробка телеметрії |
| zstd      | 7.15             | 0.49   | Архівування (Макс. стиснення) |

Висновок:  
Для Real-time обрано none (для гарантії стабільності), хоча lz4 показав найшвидшу середню обробку.

---

### 2.3. Масштабованість (Партиціонування)

| Партиції | Records/sec | Scaling Factor |
|-----------|--------------|----------------|
| 3         | 74812        | 1.00x          |
| 6         | 80213        | 1.07x          |
| 12        | 80645        | 1.08x          |

Висновок:  
Оптимальна кількість партицій — 6, оскільки подальше збільшення не дає суттєвого приросту Throughput.

---

## 3.  Фінальні Рекомендації 

| Сценарій | Real-time Alert (cloud_factor) | Batch Processing (irradiance) |
|-----------|--------------------------------|-------------------------------|
| Конфігурація | 64KB + 0ms + none + 6 Part. | 256KB + 50ms + zstd + 6 Part. |
| Throughput | 28901 rec/sec | ~26954 rec/sec (Max Throughput) |
| Latency | 4.96 мс (Avg) | 33.16 мс (Avg) |
| Практичне значення | Налаштування SCADA-систем для швидкої реакції на зміни хмарності. | Оптимізація дискового простору для історичних даних. |

---

## 4.  Ключові Виконані Команди (Windows)

###  Min Latency Test (64KB, 0ms)  
_Фіксація:_ 4.96 ms Avg Latency, 8 ms 95th  

```bash
.\kafka-producer-perf-test.bat --topic solar-batch-test --num-records 10000 --record-size 256 --throughput -1 ^
--producer-props bootstrap.servers=localhost:9092 batch.size=65536 linger.ms=0 compression.type=none acks=1 --print-metrics
